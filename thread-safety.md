Writing thread safe code is, at its core, about managing access to state, and in particular to shared, mutable state.